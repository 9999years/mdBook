<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `JS` static in crate `mdbook`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, JS">

    <title>mdbook::theme::searcher::JS - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../main.css">
    

    
    
</head>
<body class="rustdoc static">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'><a href='../../index.html'>mdbook</a>::<wbr><a href='../index.html'>theme</a>::<wbr><a href='index.html'>searcher</a></p><script>window.sidebarCurrent = {name: 'JS', ty: 'static', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Static <a href='../../index.html'>mdbook</a>::<wbr><a href='../index.html'>theme</a>::<wbr><a href='index.html'>searcher</a>::<wbr><a class="static" href=''>JS</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../src/mdbook/theme/searcher/mod.rs.html#4' title='goto source code'>[src]</a></span></h1>
<pre class='rust static'>pub static JS: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;'static [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a><code> = </code><code>b&quot;window.search = window.search || {};\n(function search(search) {\n    // Search functionality\n    //\n    // You can use !hasFocus() to prevent keyhandling in your key\n    // event handlers while the user is typing his search.\n\n    if (!Mark || !elasticlunr) {\n        return;\n    }\n    \n    var searchbar = document.getElementById(\&#39;searchbar\&#39;),\n        searchbar_outer = document.getElementById(\&#39;searchbar-outer\&#39;),\n        searchresults = document.getElementById(\&#39;searchresults\&#39;),\n        searchresults_outer = document.getElementById(\&#39;searchresults-outer\&#39;),\n        searchresults_header = document.getElementById(\&#39;searchresults-header\&#39;),\n        searchicon = document.getElementById(\&#39;search-toggle\&#39;),\n        content = document.getElementById(\&#39;content\&#39;),\n\n        searchindex = null,\n        searchoptions = {\n            bool: \&quot;AND\&quot;,\n            expand: true,\n            teaser_word_count: 30,\n            limit_results: 30,\n            fields: {\n                title: {boost: 1},\n                body: {boost: 1},\n                breadcrumbs: {boost: 0}\n            }\n        },\n        mark_exclude = [],\n        marker = new Mark(content),\n        current_searchterm = \&quot;\&quot;,\n        URL_SEARCH_PARAM = \&#39;search\&#39;,\n        URL_MARK_PARAM = \&#39;highlight\&#39;,\n        teaser_count = 0,\n\n        SEARCH_HOTKEY_KEYCODE = 83,\n        ESCAPE_KEYCODE = 27,\n        DOWN_KEYCODE = 40,\n        UP_KEYCODE = 38,\n        SELECT_KEYCODE = 13;\n\n    function hasFocus() {\n        return searchbar === document.activeElement;\n    }\n\n    function removeChildren(elem) {\n        while (elem.firstChild) {\n            elem.removeChild(elem.firstChild);\n        }\n    }\n\n    // Helper to parse a url into its building blocks.\n    function parseURL(url) {\n        var a =  document.createElement(\&#39;a\&#39;);\n        a.href = url;\n        return {\n            source: url,\n            protocol: a.protocol.replace(\&#39;:\&#39;,\&#39;\&#39;),\n            host: a.hostname,\n            port: a.port,\n            params: (function(){\n                var ret = {};\n                var seg = a.search.replace(/^\\?/,\&#39;\&#39;).split(\&#39;&amp;\&#39;);\n                var len = seg.length, i = 0, s;\n                for (;i&lt;len;i++) {\n                    if (!seg[i]) { continue; }\n                    s = seg[i].split(\&#39;=\&#39;);\n                    ret[s[0]] = s[1];\n                }\n                return ret;\n            })(),\n            file: (a.pathname.match(/\\/([^/?#]+)$/i) || [,\&#39;\&#39;])[1],\n            hash: a.hash.replace(\&#39;#\&#39;,\&#39;\&#39;),\n            path: a.pathname.replace(/^([^/])/,\&#39;/$1\&#39;)\n        };\n    }\n    \n    // Helper to recreate a url string from its building blocks.\n    function renderURL(urlobject) {\n        var url = urlobject.protocol + \&quot;://\&quot; + urlobject.host;\n        if (urlobject.port != \&quot;\&quot;) {\n            url += \&quot;:\&quot; + urlobject.port;\n        }\n        url += urlobject.path;\n        var joiner = \&quot;?\&quot;;\n        for(var prop in urlobject.params) {\n            if(urlobject.params.hasOwnProperty(prop)) {\n                url += joiner + prop + \&quot;=\&quot; + urlobject.params[prop];\n                joiner = \&quot;&amp;\&quot;;\n            }\n        }\n        if (urlobject.hash != \&quot;\&quot;) {\n            url += \&quot;#\&quot; + urlobject.hash;\n        }\n        return url;\n    }\n    \n    // Helper to escape html special chars for displaying the teasers\n    var escapeHTML = (function() {\n        var MAP = {\n            \&#39;&amp;\&#39;: \&#39;&amp;amp;\&#39;,\n            \&#39;&lt;\&#39;: \&#39;&amp;lt;\&#39;,\n            \&#39;&gt;\&#39;: \&#39;&amp;gt;\&#39;,\n            \&#39;\&quot;\&#39;: \&#39;&amp;#34;\&#39;,\n            \&quot;\&#39;\&quot;: \&#39;&amp;#39;\&#39;\n        };\n        var repl = function(c) { return MAP[c]; };\n        return function(s) {\n            return s.replace(/[&amp;&lt;&gt;\&#39;\&quot;]/g, repl);\n        };\n    })();\n    \n    function formatSearchMetric(count, searchterm) {\n        if (count == 1) {\n            return count + \&quot; search result for \&#39;\&quot; + searchterm + \&quot;\&#39;:\&quot;;\n        } else if (count == 0) {\n            return \&quot;No search results for \&#39;\&quot; + searchterm + \&quot;\&#39;.\&quot;;\n        } else {\n            return count + \&quot; search results for \&#39;\&quot; + searchterm + \&quot;\&#39;:\&quot;;\n        }\n    }\n    \n    function formatSearchResult(result, searchterms) {\n        var teaser = makeTeaser(escapeHTML(result.doc.body), searchterms);\n        teaser_count++;\n\n        // The ?URL_MARK_PARAM= parameter belongs inbetween the page and the #heading-anchor\n        var url = result.ref.split(\&quot;#\&quot;);\n        if (url.length == 1) { // no anchor found\n            url.push(\&quot;\&quot;);\n        }\n\n        return \&#39;&lt;a href=\&quot;\&#39; + url[0] + \&#39;?\&#39; + URL_MARK_PARAM + \&#39;=\&#39; + searchterms + \&#39;#\&#39; + url[1]\n            + \&#39;\&quot; aria-details=\&quot;teaser_\&#39; + teaser_count + \&#39;\&quot;&gt;\&#39; + result.doc.breadcrumbs + \&#39;&lt;/a&gt;\&#39;\n            + \&#39;&lt;span class=\&quot;teaser\&quot; id=\&quot;teaser_\&#39; + teaser_count + \&#39;\&quot; aria-label=\&quot;Search Result Teaser\&quot;&gt;\&#39; \n            + teaser + \&#39;&lt;/span&gt;\&#39;;\n    }\n    \n    function makeTeaser(body, searchterms) {\n        // The strategy is as follows:\n        // First, assign a value to each word in the document:\n        //  Words that correspond to search terms (stemmer aware): 40\n        //  Normal words: 2\n        //  First word in a sentence: 8\n        // Then use a sliding window with a constant number of words and count the\n        // sum of the values of the words within the window. Then use the window that got the\n        // maximum sum. If there are multiple maximas, then get the last one.\n        // Enclose the terms in &lt;em&gt;.\n        var stemmed_searchterms = searchterms.map(function(w) {\n            return elasticlunr.stemmer(w.toLowerCase());\n        });\n        var searchterm_weight = 40;\n        var weighted = []; // contains elements of [\&quot;word\&quot;, weight, index_in_document]\n        // split in sentences, then words\n        var sentences = body.toLowerCase().split(\&#39;. \&#39;);\n        var index = 0;\n        var value = 0;\n        var searchterm_found = false;\n        for (var sentenceindex in sentences) {\n            var words = sentences[sentenceindex].split(\&#39; \&#39;);\n            value = 8;\n            for (var wordindex in words) {\n                var word = words[wordindex];\n                if (word.length &gt; 0) {\n                    for (var searchtermindex in stemmed_searchterms) {\n                        if (elasticlunr.stemmer(word).startsWith(stemmed_searchterms[searchtermindex])) {\n                            value = searchterm_weight;\n                            searchterm_found = true;\n                        }\n                    };\n                    weighted.push([word, value, index]);\n                    value = 2;\n                }\n                index += word.length;\n                index += 1; // \&#39; \&#39; or \&#39;.\&#39; if last word in sentence\n            };\n            index += 1; // because we split at a two-char boundary \&#39;. \&#39;\n        };\n\n        if (weighted.length == 0) {\n            return body;\n        }\n\n        var window_weight = [];\n        var window_size = Math.min(weighted.length, searchoptions.teaser_word_count);\n\n        var cur_sum = 0;\n        for (var wordindex = 0; wordindex &lt; window_size; wordindex++) {\n            cur_sum += weighted[wordindex][1];\n        };\n        window_weight.push(cur_sum);\n        for (var wordindex = 0; wordindex &lt; weighted.length - window_size; wordindex++) {\n            cur_sum -= weighted[wordindex][1];\n            cur_sum += weighted[wordindex + window_size][1];\n            window_weight.push(cur_sum);\n        };\n\n        if (searchterm_found) {\n            var max_sum = 0;\n            var max_sum_window_index = 0;\n            // backwards\n            for (var i = window_weight.length - 1; i &gt;= 0; i--) {\n                if (window_weight[i] &gt; max_sum) {\n                    max_sum = window_weight[i];\n                    max_sum_window_index = i;\n                }\n            };\n        } else {\n            max_sum_window_index = 0;\n        }\n\n        // add &lt;em/&gt; around searchterms\n        var teaser_split = [];\n        var index = weighted[max_sum_window_index][2];\n        for (var i = max_sum_window_index; i &lt; max_sum_window_index+window_size; i++) {\n            var word = weighted[i];\n            if (index &lt; word[2]) {\n                // missing text from index to start of `word`\n                teaser_split.push(body.substring(index, word[2]));\n                index = word[2];\n            }\n            if (word[1] == searchterm_weight) {\n                teaser_split.push(\&quot;&lt;em&gt;\&quot;)\n            }\n            index = word[2] + word[0].length;\n            teaser_split.push(body.substring(word[2], index));\n            if (word[1] == searchterm_weight) {\n                teaser_split.push(\&quot;&lt;/em&gt;\&quot;)\n            }\n        };\n\n        return teaser_split.join(\&#39;\&#39;);\n    }\n\n    function init() {\n        searchoptions = window.search.searchoptions;\n        searchindex = elasticlunr.Index.load(window.search.index);\n\n        // Set up events\n        searchicon.addEventListener(\&#39;click\&#39;, function(e) { searchIconClickHandler(); }, false);\n        searchbar.addEventListener(\&#39;keyup\&#39;, function(e) { searchbarKeyUpHandler(); }, false);\n        document.addEventListener(\&#39;keydown\&#39;, function (e) { globalKeyHandler(e); }, false);\n        // If the user uses the browser buttons, do the same as if a reload happened\n        window.onpopstate = function(e) { doSearchOrMarkFromUrl(); };\n\n        // If reloaded, do the search or mark again, depending on the current url parameters\n        doSearchOrMarkFromUrl();\n    }\n    \n    function unfocusSearchbar() {\n        // hacky, but just focusing a div only works once\n        var tmp = document.createElement(\&#39;input\&#39;);\n        tmp.setAttribute(\&#39;style\&#39;, \&#39;position: absolute; opacity: 0;\&#39;);\n        searchicon.appendChild(tmp);\n        tmp.focus();\n        tmp.remove();\n    }\n    \n    // On reload or browser history backwards/forwards events, parse the url and do search or mark\n    function doSearchOrMarkFromUrl() {\n        // Check current URL for search request\n        var url = parseURL(window.location.href);\n        if (url.params.hasOwnProperty(URL_SEARCH_PARAM)\n            &amp;&amp; url.params[URL_SEARCH_PARAM] != \&quot;\&quot;) {\n            showSearch(true);\n            searchbar.value = decodeURIComponent(\n                (url.params[URL_SEARCH_PARAM]+\&#39;\&#39;).replace(/\\+/g, \&#39;%20\&#39;));\n            searchbarKeyUpHandler(); // -&gt; doSearch()\n        } else {\n            showSearch(false);\n        }\n\n        if (url.params.hasOwnProperty(URL_MARK_PARAM)) {\n            var words = url.params[URL_MARK_PARAM].split(\&#39; \&#39;);\n            marker.mark(words, {\n                exclude: mark_exclude\n            });\n\n            var markers = document.querySelectorAll(\&quot;mark\&quot;);\n            function hide() {\n                for (var i = 0; i &lt; markers.length; i++) {\n                    markers[i].classList.add(\&quot;fade-out\&quot;);\n                    window.setTimeout(function(e) { marker.unmark(); }, 300);\n                }\n            }\n            for (var i = 0; i &lt; markers.length; i++) {\n                markers[i].addEventListener(\&#39;click\&#39;, hide);\n            }\n        }\n    }\n    \n    // Eventhandler for keyevents on `document`\n    function globalKeyHandler(e) {\n        if (e.altKey || e.ctrlKey || e.metaKey || e.shiftKey) { return; }\n\n        if (e.keyCode == ESCAPE_KEYCODE) {\n            e.preventDefault();\n            searchbar.classList.remove(\&quot;active\&quot;);\n            setSearchUrlParameters(\&quot;\&quot;,\n                (searchbar.value.trim() != \&quot;\&quot;) ? \&quot;push\&quot; : \&quot;replace\&quot;);\n            if (hasFocus()) {\n                unfocusSearchbar();\n            }\n            showSearch(false);\n            marker.unmark();\n            return;\n        }\n        if (!hasFocus() &amp;&amp; e.keyCode == SEARCH_HOTKEY_KEYCODE) {\n            e.preventDefault();\n            showSearch(true);\n            window.scrollTo(0, 0);\n            searchbar.focus();\n            return;\n        }\n        if (hasFocus() &amp;&amp; e.keyCode == DOWN_KEYCODE) {\n            e.preventDefault();\n            unfocusSearchbar();\n            searchresults.children(\&#39;li\&#39;).first().classList.add(\&quot;focus\&quot;);\n            return;\n        }\n        if (!hasFocus() &amp;&amp; (e.keyCode == DOWN_KEYCODE\n                            || e.keyCode == UP_KEYCODE\n                            || e.keyCode == SELECT_KEYCODE)) {\n            // not `:focus` because browser does annoying scrolling\n            var current_focus = search.searchresults.find(\&quot;li.focus\&quot;);\n            if (current_focus.length == 0) return;\n            e.preventDefault();\n            if (e.keyCode == DOWN_KEYCODE) {\n                var next = current_focus.next()\n                if (next.length &gt; 0) {\n                    current_focus.classList.remove(\&quot;focus\&quot;);\n                    next.classList.add(\&quot;focus\&quot;);\n                }\n            } else if (e.keyCode == UP_KEYCODE) {\n                current_focus.classList.remove(\&quot;focus\&quot;);\n                var prev = current_focus.prev();\n                if (prev.length == 0) {\n                    searchbar.focus();\n                } else {\n                    prev.classList.add(\&quot;focus\&quot;);\n                }\n            } else {\n                window.location = current_focus.children(\&#39;a\&#39;).attr(\&#39;href\&#39;);\n            }\n        }\n    }\n    \n    function showSearch(yes) {\n        if (yes) {\n            searchbar_outer.style.display = \&#39;block\&#39;;\n            content.style.display = \&#39;none\&#39;;\n            searchicon.setAttribute(\&#39;aria-expanded\&#39;, \&#39;true\&#39;);\n        } else {\n            content.style.display = \&#39;block\&#39;;\n            searchbar_outer.style.display = \&#39;none\&#39;;\n            searchresults_outer.style.display = \&#39;none\&#39;;\n            searchbar.value = \&#39;\&#39;;\n            removeChildren(searchresults);\n            searchicon.setAttribute(\&#39;aria-expanded\&#39;, \&#39;false\&#39;);\n        }\n    }\n\n    function showResults(yes) {\n        if (yes) {\n            searchbar_outer.style.display = \&#39;block\&#39;;\n            content.style.display = \&#39;none\&#39;;\n            searchresults_outer.style.display = \&#39;block\&#39;;\n        } else {\n            content.style.display = \&#39;block\&#39;;\n            searchresults_outer.style.display = \&#39;none\&#39;;\n        }\n    }\n\n    // Eventhandler for search icon\n    function searchIconClickHandler() {\n        if (searchbar_outer.style.display === \&#39;block\&#39;) {\n            showSearch(false);\n        } else {\n            showSearch(true);\n            window.scrollTo(0, 0);\n            searchbar.focus();\n        }\n    }\n    \n    // Eventhandler for keyevents while the searchbar is focused\n    function searchbarKeyUpHandler() {\n        var searchterm = searchbar.value.trim();\n        if (searchterm != \&quot;\&quot;) {\n            searchbar.classList.add(\&quot;active\&quot;);\n            doSearch(searchterm);\n        } else {\n            searchbar.classList.remove(\&quot;active\&quot;);\n            showResults(false);\n            removeChildren(searchresults);\n        }\n\n        setSearchUrlParameters(searchterm, \&quot;push_if_new_search_else_replace\&quot;);\n\n        // Remove marks\n        marker.unmark();\n    }\n    \n    // Update current url with ?URL_SEARCH_PARAM= parameter, remove ?URL_MARK_PARAM and #heading-anchor .\n    // `action` can be one of \&quot;push\&quot;, \&quot;replace\&quot;, \&quot;push_if_new_search_else_replace\&quot;\n    // and replaces or pushes a new browser history item.\n    // \&quot;push_if_new_search_else_replace\&quot; pushes if there is no `?URL_SEARCH_PARAM=abc` yet.\n    function setSearchUrlParameters(searchterm, action) {\n        var url = parseURL(window.location.href);\n        var first_search = ! url.params.hasOwnProperty(URL_SEARCH_PARAM);\n        if (searchterm != \&quot;\&quot; || action == \&quot;push_if_new_search_else_replace\&quot;) {\n            url.params[URL_SEARCH_PARAM] = searchterm;\n            delete url.params[URL_MARK_PARAM];\n            url.hash = \&quot;\&quot;;\n        } else {\n            delete url.params[URL_SEARCH_PARAM];\n        }\n        // A new search will also add a new history item, so the user can go back\n        // to the page prior to searching. A updated search term will only replace\n        // the url.\n        if (action == \&quot;push\&quot; || (action == \&quot;push_if_new_search_else_replace\&quot; &amp;&amp; first_search) ) {\n            history.pushState({}, document.title, renderURL(url));\n        } else if (action == \&quot;replace\&quot; || (action == \&quot;push_if_new_search_else_replace\&quot; &amp;&amp; !first_search) ) {\n            history.replaceState({}, document.title, renderURL(url));\n        }\n    }\n    \n    function doSearch(searchterm) {\n\n        // Don\&#39;t search the same twice\n        if (current_searchterm == searchterm) { return; }\n        else { current_searchterm = searchterm; }\n\n        if (searchindex == null) { return; }\n\n        // Do the actual search\n        var results = searchindex.search(searchterm, searchoptions);\n        var resultcount = Math.min(results.length, searchoptions.limit_results);\n\n        // Display search metrics\n        searchresults_header.innerText = formatSearchMetric(resultcount, searchterm);\n\n        // Clear and insert results\n        var searchterms  = searchterm.split(\&#39; \&#39;);\n        removeChildren(searchresults);\n        for(var i = 0; i &lt; resultcount ; i++){\n            var resultElem = document.createElement(\&#39;li\&#39;);\n            resultElem.innerHTML = formatSearchResult(results[i], searchterms);\n            searchresults.appendChild(resultElem);\n        }\n\n        // Display results\n        showResults(true);\n    }\n\n    init();\n    // Exported functions\n    search.hasFocus = hasFocus;\n})(window.search);\n&quot;</code></pre></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../";
        window.currentCrate = "mdbook";
    </script>
    <script src="../../../main.js"></script>
    <script defer src="../../../search-index.js"></script>
</body>
</html>